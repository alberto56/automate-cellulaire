---
---
{% assign cellHeight = site.data.config.model.height %}
{% assign cellWidth = site.data.config.model.width %}
{% assign pixelHeight = site.data.config.view.height %}
{% assign pixelWidth = site.data.config.view.width %}
{% assign model = site.data.config.model.class %}
{% assign views = site.data.config.view.classes %}
{% assign controllers = site.data.config.controller.classes %}
<!doctype html>
<html>
  <head>
    <title>Automate cellulaire</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <p>Ce projet utilise une grille de {{ cellWidth }} par {{ cellHeight }}.</p>
    <p><a href="https://github.com/alberto56/automate-cellulaire">Voir le code source sur GitHub</a></p>
    <canvas id="myCanvas" width="{{ pixelWidth }}" height="{{ pixelHeight }}"></canvas>
    <script src="model.js"></script>
    <script src="view.js"></script>
    <script src="controller.js"></script>
    <script src="extra/models/{{ model }}.js"></script>
    <script>
      const model = (new {{ model }}(
        {{ cellHeight }},
        {{ cellWidth }},
      )).init();
    </script>
    <script>
      let views = [];
    </script>
    {% for view in views %}
    <script src="extra/views/{{ view }}.js"></script>
    <script>
      views.push((new {{ view }}(
        {{ pixelWidth }},
        {{ pixelHeight }},
        'myCanvas',
        model,
      )).init());
    </script>
    {% endfor %}
    <script>
      let controllers = [];
    </script>
    {% for controller in controllers %}
    <script src="extra/controllers/{{ controller }}.js"></script>
    <script>
      controllers.push((new {{ controller }}(model, views)).init());
    </script>
    {% endfor %}
  </body>
</html>
